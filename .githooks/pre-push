#!/usr/bin/env bash
set -euo pipefail

REPO_ROOT="$(git rev-parse --show-toplevel)"
SCRIPT="${REPO_ROOT}/scripts/normalize_bento_install.py"
PYTHON_BIN="${PYTHON:-python}"

if command -v make >/dev/null 2>&1; then
  make normalize-bento-install
elif command -v "${PYTHON_BIN}" >/dev/null 2>&1; then
  "${PYTHON_BIN}" "${SCRIPT}"
else
  echo "[pre-push] neither 'make' nor '${PYTHON_BIN}' is available; skipping Bento install normalization" >&2
fi

